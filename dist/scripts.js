let pokemonRepository=function(){let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=333";function o(t){"object"==typeof t&&"name"in t&&"detailsUrl"in t?e.push(t):console.log("pokemon is not correct")}function n(e){pokemonRepository.loadDetails(e).then(function(){console.log(e),a(e)})}function a(e){let t=$(".modal-body"),o=$(".modal-title");$(".modal-header");o.empty(),t.empty();let n=$("<h1>"+e.name+"</h1>"),a=$('<img class="modal-img" style="width:50%">');a.attr("src",e.imageUrlFront);let i=$('<img class="modal-img" style="width:50%">');i.attr("src",e.imageUrlBack);let l=$("<p>height : "+e.height+"</p>"),s=$("<p>weight : "+e.weight+"</p>"),p=$("<p>types : "+e.types+"</p>"),r=$("<p>abilities : "+e.abilities+"</p>");o.append(n),t.append(a),t.append(i),t.append(l),t.append(s),t.append(p),t.append(r)}let i=document.querySelector("#searchBar"),l=document.createElement("h3");return l.innerText="No PokÃ©mon found.",i.addEventListener("input",()=>{let e=document.querySelector(".row"),t=i.value.toLowerCase(),o=e.getElementsByTagName("div"),n=!1;for(let e=0;e<o.length;e++){let a=o[e].getElementsByTagName("h4")[0];(a.textContent||a.innerText).toLowerCase().indexOf(t)>-1?(o[e].style.display="",n=!0):o[e].style.display="none"}n||e.appendChild(l),e.contains(l)&&n&&e.removeChild(l)}),{add:o,getAll:function(){return e},addListItem:function(e){pokemonRepository.loadDetails(e).then(function(){let t=$(".row"),o=$('<div class="card" style="width:400px"></div>'),a=$('<img class="card-img-top" alt="Card image" style="width:20%" />');a.attr("src",e.imageUrlFront);let i=$('<div class="card-body"></div>'),l=$("<h4 class='card-title' >"+e.name+"</h4>"),s=$('<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">See Profile</button>');t.append(o),o.append(a),o.append(i),i.append(l),i.append(s),s.on("click",function(t){n(e)})})},loadList:function(){return $.ajax(t).then(function(e){e.results.forEach(function(e){let t={name:e.name,detailsUrl:e.url};o(t),console.log(t)})}).catch(function(e){console.error(e)})},loadDetails:function(e){let t=e.detailsUrl;return $.ajax(t).then(function(t){e.imageUrlFront=t.sprites.front_default,e.imageUrlBack=t.sprites.back_default,e.height=t.height,e.types=[];for(let o=0;o<t.types.length;o++)e.types.push(t.types[o].type.name);e.abilities=[];for(let o=0;o<t.abilities.length;o++)e.abilities.push(t.abilities[o].ability.name);e.weight=t.weight}).catch(function(e){console.error(e)})},showModal:a,showDetails:n}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});